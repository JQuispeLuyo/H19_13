<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                template="./../template/template.xhtml"
                xmlns:p="http://primefaces.org/ui"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:f="http://xmlns.jcp.org/jsf/core">

    <ui:define name="content">


        <p:growl id="idGrowl" />

        <h:form id="frmSucursal">

            <p:outputLabel for="NOMSUC" value="Nombre"/>
            <p:inputText id="NOMSUC" 
                         required="true"
                         requiredMessage="Descripcion requerida"
                         value="#{sucursalC.sucursal.NOMSUC}"/>

            <p:commandButton actionListener="#{equipoC.registrar()}" 
                             value="Registrar"
                             update=":idGrowl @form :idTblSucursal:tblSucursal"/>
        </h:form>


        <h:form id="idTblSucursal">

            <p:dataTable id="tblSucursal" 
                         value="#{sucursalC.listaSucursal}"
                         var="lista" 
                         rowKey="#{lista.IDSUC}"
                         selection="#{sucursalC.selectSucursal}" 
                         selectionMode="single">
                <p:column headerText="Id" >
                    <h:outputText value="#{lista.IDSUC}"/>
                </p:column>

                <p:column headerText="Nombre" >
                    <h:outputText value="#{lista.NOMSUC}"/>
                </p:column>

                <p:column headerText="Estado">
                    <h:outputText value="#{lista.ESTASUC}"/>
                </p:column>


            </p:dataTable>

            <p:contextMenu for="tblSucursal">
                <p:menuitem value="Modificar" update=":frmdSucursal" oncomplete="PF('dlqwSucursal').show()"/>
                <p:menuitem value="Eliminar" update="idTblSucursal :idGrowl" actionListener="#{sucursalC.eliminar()}"/>
            </p:contextMenu>

        </h:form>


        <p:dialog id="dlgSucursal" widgetVar="dlqwSucursal">
            <h:form id="frmdSucursal">

                <p:outputLabel for="NOMSUC" value="Nombre"/>
                <p:inputText id="NOMSUC" value="#{sucursalC.selectSucursal.NOMSUC}"/>

                <p:commandButton actionListener="#{sucursalC.modificar()}" 
                                 value="Modificar"
                                 oncomplete="PF('dlqwSucursal').hide()"
                                 update=":idGrowl frmdSucursal :idTblSucursal:tblSucursal"/>
                <p:commandButton value="Cerrar"
                                 process="@this"
                                 oncomplete="PF('dlqwSucursal').hide()"
                                 update=":idGrowl frmdSucursal :idTblSucursal:tblSucursal">
                    <p:resetInput target="dlqwSucursal" />   
                </p:commandButton>
            </h:form>
        </p:dialog>





    </ui:define>

</ui:composition>
